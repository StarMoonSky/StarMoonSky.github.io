---
layout:     post
title: Â  Â   ç©ç©Pythonçˆ¬è™«
subtitle: Â  urllib2åº“
date: Â  Â  Â  2017-09-11
author:     CC
header-img: img/post-bg-ios10.jpg
catalog: true
tags:
 Â   - Pyhon
 Â  Â - HTTP
---


### urllib2 åˆ†åˆ†é’Ÿæ‰’ä¸€ä¸ªç½‘é¡µ


import urllib2
 
response = urllib2.urlopen("http://www.baidu.com")
print response.read()

### åˆ†æä¸€ä¸‹æ–¹æ³•

é¦–å…ˆæˆ‘ä»¬è°ƒç”¨çš„æ˜¯urllib2åº“é‡Œé¢çš„urlopenæ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ªURLï¼Œè¿™ä¸ªç½‘å€æ˜¯ç™¾åº¦é¦–é¡µï¼Œåè®®æ˜¯HTTPåè®®ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŠŠHTTPæ¢åšFTP,FILE,HTTPS ç­‰ç­‰ï¼Œåªæ˜¯ä»£è¡¨äº†ä¸€ç§è®¿é—®æ§åˆ¶åè®®ï¼Œurlopenä¸€èˆ¬æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œå®ƒçš„å‚æ•°å¦‚ä¸‹ï¼š

```swift
urlopen(url, data, timeout)
```
ç¬¬ä¸€ä¸ªå‚æ•°urlå³ä¸ºURLï¼Œç¬¬äºŒä¸ªå‚æ•°dataæ˜¯è®¿é—®URLæ—¶è¦ä¼ é€çš„æ•°æ®ï¼Œç¬¬ä¸‰ä¸ªtimeoutæ˜¯è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚

ç¬¬äºŒä¸‰ä¸ªå‚æ•°æ˜¯å¯ä»¥ä¸ä¼ é€çš„ï¼Œdataé»˜è®¤ä¸ºç©ºNoneï¼Œtimeouté»˜è®¤ä¸º socket._GLOBAL_DEFAULT_TIMEOUT

ç¬¬ä¸€ä¸ªå‚æ•°URLæ˜¯å¿…é¡»è¦ä¼ é€çš„ï¼Œåœ¨è¿™ä¸ªä¾‹å­é‡Œé¢æˆ‘ä»¬ä¼ é€äº†ç™¾åº¦çš„URLï¼Œæ‰§è¡Œurlopenæ–¹æ³•ä¹‹åï¼Œè¿”å›ä¸€ä¸ªresponseå¯¹è±¡ï¼Œè¿”å›ä¿¡æ¯ä¾¿ä¿å­˜åœ¨è¿™é‡Œé¢ã€‚

### å­—ç¬¦ä¸²æ”¹åŠ¨


#### String æ“ä½œç®€åŒ–äº†

`String` è®¸å¤šè¦é€šè¿‡ `.characters` è¿›è¡Œçš„æ“ä½œï¼Œå¯ä»¥ç›´æ¥ç”¨ String è¿›è¡Œæ“ä½œäº†ã€‚

ä¾‹å¦‚ï¼š

```swift
let greeting = "Hello, ğŸ˜œ!"
// No need to drill down to .characters
let n = greeting.count
let endOfSentence = greeting.index(of: "!")!

```

#### æ„é€ Requset


å…¶å®ä¸Šé¢çš„urlopenå‚æ•°å¯ä»¥ä¼ å…¥ä¸€ä¸ªrequestè¯·æ±‚,å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªRequestç±»çš„å®ä¾‹ï¼Œæ„é€ æ—¶éœ€è¦ä¼ å…¥Url,Dataç­‰ç­‰çš„å†…å®¹ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¸¤è¡Œä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆæ”¹å†™

```swift

import urllib2
 
request = urllib2.Request("http://www.baidu.com")
response = urllib2.urlopen(request)
print response.read()
```




#### POSTå’ŒGETæ•°æ®ä¼ é€
æˆ‘ä»¬å¼•å…¥äº†urllibåº“ï¼Œç°åœ¨æˆ‘ä»¬æ¨¡æ‹Ÿç™»é™†ï¼Œå½“ç„¶ä¸Šè¿°ä»£ç å¯èƒ½ç™»é™†ä¸è¿›å»ï¼Œå› ä¸ºè¿˜è¦åšä¸€äº›è®¾ç½®å¤´éƒ¨headerçš„å·¥ä½œï¼Œæˆ–è€…è¿˜æœ‰ä¸€äº›å‚æ•° æ²¡æœ‰è®¾ç½®å…¨ï¼Œè¿˜æ²¡æœ‰æåŠåˆ°åœ¨æ­¤å°±ä¸å†™ä¸Šå»äº†ï¼Œåœ¨æ­¤åªæ˜¯è¯´æ˜ç™»å½•çš„åŸç†ã€‚æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå­—å…¸ï¼Œåå­—ä¸ºvaluesï¼Œå‚æ•°æˆ‘è®¾ç½®äº†usernameå’Œ passwordï¼Œä¸‹é¢åˆ©ç”¨urllibçš„urlencodeæ–¹æ³•å°†å­—å…¸ç¼–ç ï¼Œå‘½åä¸ºdataï¼Œæ„å»ºrequestæ—¶ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œurlå’Œdataï¼Œè¿ è¡Œç¨‹åºï¼Œå³å¯å®ç°ç™»é™†ï¼Œè¿”å›çš„ä¾¿æ˜¯ç™»é™†åå‘ˆç°çš„é¡µé¢å†…å®¹ã€‚å½“ç„¶ä½ å¯ä»¥è‡ªå·±æ­å»ºä¸€ä¸ªæœåŠ¡å™¨æ¥æµ‹è¯•ä¸€ä¸‹ã€‚
```swift
import urllib
import urllib2
 
values = {"username":"1016903103@qq.com","password":"XXXX"}
data = urllib.urlencode(values) 
url = "https://passport.csdn.net/account/login?from=http://my.csdn.net/my/mycsdn"
request = urllib2.Request(url,data)
response = urllib2.urlopen(request)
print response.read()
```


è‡³äºGETæ–¹å¼æˆ‘ä»¬å¯ä»¥ç›´æ¥æŠŠå‚æ•°å†™åˆ°ç½‘å€ä¸Šé¢ï¼Œç›´æ¥æ„å»ºä¸€ä¸ªå¸¦å‚æ•°çš„URLå‡ºæ¥å³å¯ã€‚
```swift
import urllib
import urllib2
 
values={}
values['username'] = "1016903103@qq.com"
values['password']="XXXX"
data = urllib.urlencode(values) 
url = "http://passport.csdn.net/account/login"
geturl = url + "?"+data
request = urllib2.Request(geturl)
response = urllib2.urlopen(request)
print response.read()
```

ä½ å¯ä»¥print geturlï¼Œæ‰“å°è¾“å‡ºä¸€ä¸‹urlï¼Œå‘ç°å…¶å®å°±æ˜¯åŸæ¥çš„urlåŠ ï¼Ÿç„¶ååŠ ç¼–ç åçš„å‚æ•°
```swift
http://passport.csdn.net/account/login?username=1016903103%40qq.com&password=XXXX
```
